---
title: 获取视频封面
tags: 
- javascript
- 视频
- 前端
---

### 获取视频封面

使用js获取视频的首帧图片

```js
/**
 * 获取视频封面
 * @param url
 * @returns {Promise<unknown>}
 */
getVideoBase64(url) {
    return new Promise((resolve, reject) => {

        let dataURL = '';
        let video = document.createElement("video");

        // 处理跨域
        video.setAttribute('crossOrigin', 'anonymous');
        video.setAttribute('src', url);
        video.setAttribute('width', 400);
        video.setAttribute('height', 240);
        video.setAttribute('autoplay', 'autoplay');
        video.addEventListener('loadeddata', () => {
            // 视频时长video.duration;
            let canvas = document.createElement("canvas"),
                //canvas的尺寸和图片一样
                width = video.width, 
                height = video.height;

            canvas.width = width;
            canvas.height = height;
             // 绘制canvas
            canvas.getContext("2d").drawImage(video, 0, 0, width, height);
            // 转换为base64
            dataURL = canvas.toDataURL('image/jpeg'); 
            resolve(dataURL);
        });
    });
}
```